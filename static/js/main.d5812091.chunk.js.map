{"version":3,"sources":["utils/custom-bcrypt.js","components/auth/Login.js","components/auth/Register.js","components/forum/Message.js","components/forum/Forum.js","components/forum/Profile.js","components/forum/Search.js","components/forum/NewMessage.js","components/forum/Home.js","components/admin/Modal.js","components/admin/UserResults.js","components/admin/HomeAdmin.js","App.js","serviceWorker.js","index.js"],"names":["md5","require","module","exports","hash","rawPassword","options","salt","Date","getTime","rounds","hashed","i","compare","hashedPassword","split","this","error","Error","message","Login","props","sessionStorage","removeItem","useState","email","password","user","saveUser","changeError","onChange","e","target","name","value","className","onSubmit","preventDefault","trim","window","firebase","firestore","collection","doc","get","then","exists","userFromFirebase","data","rol","setItem","JSON","stringify","history","push","delete","htmlFor","type","id","placeholder","to","role","Register","firstName","lastName","confirmPassword","active","length","hashPassword","userFirebase","set","Message","date","seconds","nanoseconds","formatDate","getDate","getMonth","getFullYear","getHours","getMinutes","console","log","onClickMessage","parentCallback","ownMessage","parse","getItem","src","alt","href","onClick","title","description","parentCallbackEdit","parentCallbackDelete","replies","Forum","getSelectedMessage","messageSelected","setState","messageError","getEditMessage","editMessage","getDeleteMessage","componentDidMount","state","comment","newMessage","completeComment","errorMessage","messages","bind","messagesFromFirebase","querySnapshot","forEach","dateType","map","reply","class","key","rows","Component","Profile","userSaved","isDisabled","valueButton","enable","changeEnable","disabled","Search","numMessages","where","countNum","catch","NewMessage","saveMessage","useEffect","Timestamp","fromDate","add","docRef","messageFirebase","alert","Home","actualState","page","changePage","inputSearch","search","stateSearch","keyForum","keySearch","keys","changeKey","newKey","aria-label","modalRoot","document","getElementById","Modal","children","elRef","useRef","current","div","createElement","appendChild","removeChild","createPortal","UserResults","loading","users","showModal","emailDelete","usersFromFirebase","update","setTimeout","updateUsers","filter","activationUser","deleteAction","deleteUser","HomeAdmin","setMessage","App","exact","path","component","Boolean","location","hostname","match","ReactDOM","render","StrictMode","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.d5812091.chunk.js","sourcesContent":["const md5 = require(\"md5\");\r\n\r\nmodule.exports = {\r\n  /**\r\n   *\r\n   *\r\n   * @param { string } rawPass - the password to be hashed\r\n   * @param { object } [options={}] - object containing salt and rounds\r\n   * @returns {string} \r\n   */\r\n  hash(rawPassword, options = {}) {\r\n    /**\r\n     * salt is optional, if not provided it will be set to current timestamp\r\n     */\r\n    const salt = options.salt ? options.salt : new Date().getTime();\r\n\r\n    /**\r\n     * rounds is optional, if not provided it will be set to 10\r\n     */\r\n    const rounds = options.rounds ? options.rounds : 10;\r\n\r\n    let hashed = md5(rawPassword + salt);\r\n    for (let i = 0; i <= rounds; i++) {\r\n      hashed = md5(hashed);\r\n    }\r\n    return `${salt}$${rounds}$${hashed}`;\r\n  },\r\n  /**\r\n   *\r\n   *\r\n   * @param {string} rawPassword - the raw password\r\n   * @param { string } hashedPassword - the hashed password\r\n   * @returns\r\n   */\r\n  compare(rawPassword, hashedPassword) {\r\n    try {\r\n      const [ salt, rounds ] = hashedPassword.split('$');\r\n      const hashedRawPassword = this.hash(rawPassword, { salt, rounds });\r\n      return hashedPassword === hashedRawPassword;\r\n    } catch (error) {\r\n      throw Error(error.message);\r\n    }\r\n  }\r\n};\r\n","import React, {useState} from 'react'\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst Login = (props) => {\r\n    \r\n\r\n    sessionStorage.removeItem('user');\r\n    sessionStorage.removeItem('admin');\r\n\r\n    const [user, saveUser] = useState({\r\n        email: '',\r\n        password: ''\r\n    })\r\n\r\n    const [error, changeError] = useState({\r\n        error: false,\r\n        message : ''\r\n    })\r\n\r\n    const {email, password} = user;\r\n    \r\n    const onChange = (e) => {\r\n        saveUser({\r\n            ...user,\r\n            [e.target.name] : e.target.value\r\n        })\r\n\r\n        changeError({\r\n            error: false,\r\n            message: ''\r\n        })\r\n    }\r\n\r\n    const onSubmit = e => {\r\n        e.preventDefault();\r\n        if(email.trim() === '' || password.trim() === '' ){\r\n            \r\n            changeError({\r\n                error: true,\r\n                message: 'No pueden haber campos vacios'\r\n            })\r\n            return;\r\n        }\r\n\r\n        window.firebase.firestore().collection('users').doc(user.email).get().then(function(doc){\r\n            if (doc.exists) {\r\n                const userFromFirebase = doc.data();\r\n                const bcrypt = require('../../utils/custom-bcrypt');\r\n\r\n                if(bcrypt.compare(user.password, userFromFirebase.password)) {\r\n                    \r\n                    if(userFromFirebase.rol){\r\n                        sessionStorage.setItem('admin', JSON.stringify(userFromFirebase));\r\n                        props.history.push('/home-admin');\r\n                    }else{\r\n                        sessionStorage.setItem('user', JSON.stringify(userFromFirebase));\r\n                        props.history.push('/home');\r\n                    }\r\n                    \r\n                }else {\r\n                    changeError({\r\n                        error: true,\r\n                        message: 'La contraseña es incorrecta'\r\n                    })\r\n                }\r\n            }else{\r\n                window.firebase.firestore().collection('users').doc(user.email).delete()\r\n\r\n                changeError({\r\n                    error: true,\r\n                    message: 'El email no se encuentra registrado'\r\n                })\r\n            }\r\n        });\r\n    }\r\n\r\n    return (\r\n        <div className=\"form-login\">\r\n            <div className=\"container-form\">\r\n                <h1>Iniciar Sesión</h1>\r\n                <form onSubmit={onSubmit}>\r\n                    <div className=\"element-form\">\r\n                        <label htmlFor=\"email\">Email</label>\r\n                        <input\r\n                            type=\"email\"\r\n                            id=\"email\"\r\n                            name=\"email\"\r\n                            value = {email}\r\n                            placeholder=\"Email\"\r\n                            onChange={onChange}/>\r\n                    </div>\r\n\r\n                    <div className=\"element-form\">\r\n                        <label htmlFor=\"password\">Contraseña</label>\r\n                        <input\r\n                            type=\"password\"\r\n                            id=\"password\"\r\n                            name=\"password\"\r\n                            value = {password}\r\n                            placeholder=\"Contraseña\"\r\n                            onChange={onChange}/>\r\n                    </div>\r\n\r\n                    <div className=\"element-form\">\r\n                        <input type=\"submit\" className=\"btn btn-primary btn-block\" value=\"Iniciar Sesión\"/>\r\n                    </div>\r\n                </form>\r\n\r\n                <Link to= {'/register'} className=\"link-account\">\r\n                    Registrarse\r\n                </Link>\r\n                {error.error &&\r\n                            <div className=\"alert alert-danger\" role=\"alert\">{error.message}</div>\r\n                        }\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Login ","import React, {useState, useEffect} from 'react'\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst Register = (props) => {\r\n\r\n\r\n    sessionStorage.removeItem('user');\r\n\r\n    const [user, saveUser] = useState({\r\n        firstName: '',\r\n        lastName: '',\r\n        email: '',\r\n        password: '',\r\n        confirmPassword: '',\r\n        active : true\r\n    })\r\n\r\n    const [error, changeError] = useState({\r\n        error: false,\r\n        message : ''\r\n    })\r\n    \r\n    const {firstName, lastName, email, password, confirmPassword, active} = user;\r\n    \r\n    const onChange = (e) => {\r\n        saveUser({\r\n            ...user,\r\n            [e.target.name] : e.target.value\r\n        })\r\n\r\n        changeError({\r\n            error: false,\r\n            message: ''\r\n        })\r\n    }\r\n\r\n    const onSubmit = e => {\r\n        e.preventDefault();\r\n\r\n        //Hacer validaciones aqui\r\n        if(firstName.trim() === '' || lastName.trim() === '' || email.trim() === '' || \r\n            password.trim() === '' || confirmPassword.trim() === '' ){\r\n                \r\n                changeError({\r\n                    error: true,\r\n                    message: 'No pueden haber campos vacios'\r\n                })\r\n\r\n\r\n                return;\r\n            }\r\n        if(password.length < 6 ){\r\n            changeError({\r\n                error: true,\r\n                message: 'La contraseña debe tener al menos 6 caracteres'\r\n            })\r\n            return;\r\n        }\r\n\r\n        if(password !== confirmPassword){\r\n            changeError({\r\n                error: true,\r\n                message: 'Las contraseñas no concuerdan'\r\n            })\r\n            return;\r\n        }\r\n\r\n        const bcrypt = require('../../utils/custom-bcrypt');\r\n        const hashPassword = bcrypt.hash(user.password);\r\n        saveUser({\r\n            ...user,\r\n            password : hashPassword\r\n        })\r\n        \r\n        const userFirebase = {\r\n            firstName: firstName,\r\n            lastName: lastName,\r\n            email: email,\r\n            password: hashPassword,\r\n            active : active\r\n        }\r\n\r\n        window.firebase.firestore().collection('users').doc(user.email).get().then(function(doc){\r\n            if (doc.exists) {\r\n\r\n                changeError({\r\n                    error: true,\r\n                    message: 'El email ya se encuentra registrado'\r\n                })\r\n\r\n                saveUser({\r\n                    ...user,\r\n                    email : '',\r\n                    password : '',\r\n                    confirmPassword : ''\r\n                })\r\n            } else {\r\n                window.firebase.firestore().collection(\"users\").doc(userFirebase.email).set(userFirebase)\r\n                sessionStorage.setItem('user', JSON.stringify(userFirebase));\r\n                props.history.push('/home');\r\n            }\r\n        });\r\n    }\r\n\r\n    return (\r\n        <div className=\"form-login\">\r\n            <div className=\"container-form\">\r\n                <h1>Registrarse</h1>\r\n                <form onSubmit={onSubmit}>\r\n\r\n                    <div className=\"element-form\">\r\n                        <label htmlFor=\"firstName\">Nombres</label>\r\n                        <input\r\n                            type=\"text\"\r\n                            id=\"firstName\"\r\n                            name=\"firstName\"\r\n                            value = {firstName}\r\n                            placeholder=\"Nombres\"\r\n                            onChange={onChange}/>\r\n                    </div>\r\n\r\n\r\n                    <div className=\"element-form\">\r\n                        <label htmlFor=\"lastName\">Apellidos</label>\r\n                        <input\r\n                            type=\"text\"\r\n                            id=\"lastName\"\r\n                            name=\"lastName\"\r\n                            value = {lastName}\r\n                            placeholder=\"Apellidos\"\r\n                            onChange={onChange}/>\r\n                    </div>\r\n\r\n                    <div className=\"element-form\">\r\n                        <label htmlFor=\"email\">Email</label>\r\n                        <input\r\n                            type=\"email\"\r\n                            id=\"email\"\r\n                            name=\"email\"\r\n                            value = {email}\r\n                            placeholder=\"Email\"\r\n                            onChange={onChange}/>\r\n                    </div>\r\n\r\n                    <div className=\"element-form\">\r\n                        <label htmlFor=\"password\">Contraseña</label>\r\n                        <input\r\n                            type=\"p\tconst onClickMessage = e => {\r\n                                e.preventDefault();\r\n                                props.parentCallback(props.message)\r\n                                \r\n                            }assword\"\r\n                            id=\"password\"\r\n                            name=\"password\"\r\n                            value = {password}\r\n                            placeholder=\"Contraseña\"\r\n                            onChange={onChange}/>\r\n                    </div>\r\n\r\n                    <div className=\"element-form\">\r\n                        <label htmlFor=\"confirmPassword\">Confirmar Contraseña</label>\r\n                        <input\r\n                            type=\"password\"\r\n                            id=\"confirmPassword\"\r\n                            name=\"confirmPassword\"\r\n                            value = {confirmPassword}\r\n                            placeholder=\"Reescribe tu contraseña\"\r\n                            onChange={onChange}/>\r\n                    </div>\r\n\r\n                    <div className=\"element-form\">\r\n                        <input type=\"submit\" className=\"btn btn-primary btn-block\" value=\"Registrarse\"/>\r\n                    </div>\r\n                </form>\r\n\r\n                <Link to= {'/'} className=\"link-account\">\r\n                    Inicio de sesión\r\n                </Link>\r\n                {error.error &&\r\n                            <div className=\"alert alert-danger\" role=\"alert\">{error.message}</div>\r\n                        }\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Register; ","import React, { useState } from 'react'\r\n\r\nconst Message = (props) => {\r\n\r\n\r\n\tconst date = new Date(props.message.date.seconds * 1000 + props.message.date.nanoseconds/1000)\r\n\tconst formatDate = `${date.getDate()}-${date.getMonth() + 1}-${date.getFullYear()}    ${date.getHours()}:${date.getMinutes()}`\r\n\tconsole.log(date)\r\n\r\n\tconst onClickMessage = e => {\r\n\t\te.preventDefault();\r\n\t\tprops.parentCallback(props.message)\r\n\t\t\r\n\t}\r\n\r\n\tconst onClickEdit = e => {\r\n\t\te.preventDefault();\r\n\t\tprops.parentCallbackEdit(props.message)\r\n\t\t\r\n\t}\r\n\r\n\tconst onClickDelete = e => {\r\n\t\te.preventDefault();\r\n\t\tprops.parentCallbackDelete(props.message)\r\n\t\twindow.firebase.firestore().collection(\"messages\").doc(props.message.id).delete()\r\n\t\t\r\n\t}\r\n\tconst ownMessage = (props.message.user.email === JSON.parse(sessionStorage.getItem('user')).email);\r\n\r\n\treturn (\r\n\r\n\t\t<div className=\"media message mb-1\">\r\n\t\t\t<img src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7e/Circle-icons-profile.svg/1200px-Circle-icons-profile.svg.png\" className=\"size-image mr-3 p-3\" alt=\"...\" />\r\n\t\t\t<div className=\"media-body  p-3\">\r\n\t\t\t\t<a className=\"mt-0 btn-outline-danger\" href=\"\"  onClick={onClickMessage} ><strong>{props.message.title}</strong></a>\r\n\r\n\t\t\t\t<h4>{props.message.description}</h4>\r\n\t\t\t\t{ownMessage &&\r\n                            <a className=\"mt-2 mr-5 pt-1 pb-1 pl-5 pr-5 btn btn-danger\" role=\"alert\" onClick={onClickEdit}>  Editar  </a>\r\n                    }\r\n\t\t\t\t{ownMessage &&\r\n                            <a className=\"mt-2 pt-1 pb-1 pl-5 pr-5 btn btn-danger\" role=\"alert\" onClick={onClickDelete}>  Eliminar  </a>\r\n                    }\r\n\t\t\t</div>\r\n\t\t\t<div className=\"m-4 center-block\">\r\n\t\t\t<a className=\"mb-4 align-middle\" href=\"/\" onClick={onClickMessage}> {props.message.replies.length} respuestas</a>\r\n\t\t\t<h5>{props.message.user.firstName + \" \" + props.message.user.lastName} </h5>\r\n\t\t\t<h5>{formatDate}</h5>\r\n\r\n\t\t\t</div>\r\n\r\n\t\t</div>\r\n\r\n\t);\r\n\r\n}\r\n\r\n\r\nexport default Message","import React, { Component } from 'react';\r\nimport Message from './Message';\r\n\r\n\r\nclass Forum extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            messages: [],\r\n            comment: ''\r\n        }\r\n\r\n        this.getSelectedMessage = this.getSelectedMessage.bind(this);\r\n        this.onChange = this.onChange.bind(this)\r\n        this.onSubmit = this.onSubmit.bind(this)\r\n\r\n    }\r\n    componentDidMount() {\r\n        var messagesFromFirebase = []\r\n\r\n        window.firebase.firestore().collection(\"messages\").get().then(querySnapshot => {\r\n            querySnapshot.forEach(doc => {\r\n\r\n                messagesFromFirebase.push(doc.data())\r\n                console.log(doc.id, \" => \", doc.data());\r\n            });\r\n\r\n            this.setState({\r\n                messages: messagesFromFirebase\r\n            })\r\n        });\r\n        console.log(this.state);\r\n    }\r\n\r\n    getSelectedMessage = (messageSelected) => {\r\n        this.setState({ \r\n            message: messageSelected,\r\n            messageError: '' \r\n         })\r\n    }\r\n    \r\n    getEditMessage = (message) => {\r\n        this.props.editMessage(message)\r\n    }\r\n\r\n    \r\n    getDeleteMessage = (message) => {\r\n        this.componentDidMount()\r\n    }\r\n\r\n    onChange = (e) => {\r\n        this.setState({\r\n            ...this.state,\r\n            [e.target.name] : e.target.value,\r\n            errorMessage : ''\r\n        })\r\n\r\n    }\r\n\r\n    onSubmit = e => {\r\n        e.preventDefault();\r\n        if(this.state.comment.trim() === '' ){\r\n            \r\n            this.setState({\r\n                ...this.state,\r\n                messageError: 'No pueden haber campos vacios'\r\n            })\r\n            return;\r\n        }\r\n\r\n        const newMessage = this.state.message;\r\n        const completeComment = {\r\n            id : this.state.message.replies.length,\r\n            description : this.state.comment,\r\n            user: JSON.parse(sessionStorage.getItem('user')),\r\n        }\r\n        newMessage.replies.push(completeComment)\r\n\r\n        this.setState({\r\n            message : newMessage,\r\n            comment : '',\r\n            errorMessage : ''\r\n        })\r\n\r\n        console.log(newMessage)\r\n        window.firebase.firestore().collection(\"messages\").doc(newMessage.id).set(this.state.message)\r\n\r\n    }\r\n\r\n    render() {\r\n\r\n        const { messages } = this.state;\r\n\r\n        if (this.state.message) {\r\n\r\n            const { id, title, description, date, user, replies } = this.state.message;\r\n\r\n            const dateType = new Date(date.seconds * 1000 + date.nanoseconds / 1000)\r\n            const formatDate = `${dateType.getDate()}-${dateType.getMonth() + 1}-${dateType.getFullYear()}    ${dateType.getHours()}:${dateType.getMinutes()}`\r\n\r\n            return (\r\n                <div className='container'>\r\n                    <div className=\"media message m-5 \">\r\n                    <img src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7e/Circle-icons-profile.svg/1200px-Circle-icons-profile.svg.png\" className=\"size-image mr-3 p-3\" alt=\"...\" />\r\n                    <div className=\"media-body  p-3\">\r\n                        <h3 className=\"mt-0\"><strong>{title}</strong></h3>\r\n                        <h4>{description}</h4>\r\n\r\n                        {\r\n                            replies.map(reply => (\r\n                                \r\n                                <div class=\"media message m-5\"key={reply.id}>\r\n                                <a class=\"mr-3\" href=\"#\">\r\n                                  <img src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7e/Circle-icons-profile.svg/1200px-Circle-icons-profile.svg.png\" className=\"size-image mr-3 p-3\" alt=\"...\"/>\r\n                                </a>\r\n                                <div class=\"media-body pt-4\">\r\n                                    <h5 class=\"mt-0\">{reply.user.firstName + \" \" + reply.user.lastName}</h5>\r\n                                   {reply.description}\r\n                                </div>\r\n                              </div>\r\n                            ))\r\n                        }\r\n\r\n                    </div>\r\n                    <div className=\"m-4 center-block\">\r\n                        <h4 className=\"mb-4 align-middle\"> {replies.length} respuestas</h4>\r\n                        <h5>{user.firstName + \" \" + user.lastName} </h5>\r\n                        <h5>{formatDate}</h5>\r\n                    </div>\r\n\r\n                </div>\r\n\r\n                     <form onSubmit={this.onSubmit} >\r\n                            <div className=\"element-form\">\r\n                                <textarea className=\"form-control textarea\"\r\n                                    id=\"comment\"\r\n                                    name=\"comment\"\r\n                                    value={this.state.comment}\r\n                                    placeholder=\"Comentarios\"\r\n                                    onChange={this.onChange}\r\n                                    rows=\"3\" />\r\n                            </div>\r\n                            <input type=\"submit\" className=\"btn btn-dark btn-block\" value=\"Comentar\" />\r\n                        </form>\r\n                        {this.state.errorMessage &&\r\n                            <div className=\"alert alert-danger\" role=\"alert\">{this.state.errorMessage}</div>\r\n                        }\r\n                </div>\r\n            );\r\n\r\n        } else {\r\n            return (\r\n                <div className='container'>\r\n                    <h1 className=\"m-4 title-forum\">Publicaciones del Foro</h1>\r\n                    {messages.map(message => (\r\n                        <Message key={message.id}\r\n                            message={message} parentCallback={this.getSelectedMessage} \r\n                            parentCallbackEdit={this.getEditMessage} parentCallbackDelete={this.getDeleteMessage} />\r\n                    ))}\r\n                </div>\r\n            );\r\n        }\r\n\r\n    }\r\n}\r\n\r\nexport default Forum","import React, { useState } from 'react'\r\n\r\nconst Profile = (props) => {\r\n\r\n    var userSaved = (sessionStorage.getItem('user')) ? JSON.parse(sessionStorage.getItem('user')) : JSON.parse(sessionStorage.getItem('admin'));\r\n\r\n    const [user, saveUser] = useState({\r\n        firstName: userSaved.firstName,\r\n        lastName: userSaved.lastName,\r\n        email: userSaved.email,\r\n        password: '',\r\n        active: userSaved.active\r\n    })\r\n\r\n    const [enable, changeEnable] = useState({\r\n        isDisabled: true,\r\n        valueButton: \"Editar informacion\"\r\n    })\r\n\r\n    const [error, changeError] = useState({\r\n        error: false,\r\n        message: ''\r\n    })\r\n\r\n    const { firstName, lastName, email, password, active } = user;\r\n\r\n    const onChange = (e) => {\r\n        saveUser({\r\n            ...user,\r\n            [e.target.name]: e.target.value\r\n        })\r\n\r\n        changeError({\r\n            error: false,\r\n            message: ''\r\n        })\r\n    }\r\n\r\n    const onSubmit = e => {\r\n        e.preventDefault();\r\n\r\n        if (enable.isDisabled) {\r\n\r\n            changeEnable({\r\n                isDisabled: false,\r\n                valueButton: \"Confirmar cambios\"\r\n            })\r\n\r\n        } else {\r\n\r\n            //Hacer validaciones aqui\r\n            if (firstName.trim() === '' || lastName.trim() === '' || email.trim() === '' ||\r\n                password.trim() === '' ) {\r\n\r\n                changeError({\r\n                    error: true,\r\n                    message: 'No pueden haber campos vacios'\r\n                })\r\n\r\n\r\n                return;\r\n            }\r\n            if (password.length < 6) {\r\n                changeError({\r\n                    error: true,\r\n                    message: 'La contraseña debe tener al menos 6 caracteres'\r\n                })\r\n                return;\r\n            }\r\n\r\n            const bcrypt = require('../../utils/custom-bcrypt');\r\n            const hashPassword = bcrypt.hash(user.password);\r\n            \r\n\r\n            const userFirebase = {\r\n\r\n                firstName: user.firstName,\r\n                lastName: user.lastName,\r\n                email: user.email,\r\n                password: hashPassword,\r\n                active : user.active\r\n            }\r\n\r\n            console.log(user)\r\n            \r\n            window.firebase.firestore().collection(\"users\").doc(userFirebase.email).set(userFirebase)\r\n\r\n            changeEnable({\r\n                isDisabled: true,\r\n                valueButton: \"Editar informacion\"\r\n            })\r\n            console.log(user)\r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n    return (\r\n        <div className=\"form-login\">\r\n            <div className=\"container-form\">\r\n                <h1>PERFIL</h1>\r\n                <form onSubmit={onSubmit}>\r\n\r\n                    <div className=\"element-form\">\r\n                        <label htmlFor=\"firstName\">Nombres</label>\r\n                        <input\r\n                            type=\"text\"\r\n                            id=\"firstName\"\r\n                            name=\"firstName\"\r\n                            value={firstName}\r\n                            placeholder=\"Nombres\"\r\n                            onChange={onChange}\r\n                            disabled={enable.isDisabled} />\r\n                    </div>\r\n\r\n\r\n                    <div className=\"element-form\">\r\n                        <label htmlFor=\"lastName\">Apellidos</label>\r\n                        <input\r\n                            type=\"text\"\r\n                            id=\"lastName\"\r\n                            name=\"lastName\"\r\n                            value={lastName}\r\n                            placeholder=\"Apellidos\"\r\n                            onChange={onChange}\r\n                            disabled={enable.isDisabled} />\r\n                    </div>\r\n\r\n                    <div className=\"element-form\">\r\n                        <label htmlFor=\"email\">Email</label>\r\n                        <input\r\n                            type=\"email\"\r\n                            id=\"email\"\r\n                            name=\"email\"\r\n                            value={email}\r\n                            placeholder=\"Email\"\r\n                            onChange={onChange} \r\n                            disabled={enable.isDisabled}/>\r\n                    </div>\r\n\r\n                    <div className=\"element-form\">\r\n                        <label htmlFor=\"password\">Contraseña</label>\r\n                        <input\r\n                            type=\"password\"\r\n                            id=\"password\"\r\n                            name=\"password\"\r\n                            value={password}\r\n                            placeholder=\"Contraseña\"\r\n                            onChange={onChange}\r\n                            disabled={enable.isDisabled} />\r\n                    </div>\r\n\r\n\r\n                    <div className=\"element-form\">\r\n                        <input type=\"submit\" className=\"btn btn-primary btn-block\" value={enable.valueButton} />\r\n                    </div>\r\n                </form>\r\n\r\n                {error.error &&\r\n                    <div className=\"alert alert-danger\" role=\"alert\">{error.message}</div>\r\n                }\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Profile; ","import React, {Component} from 'react'\r\nimport { Link } from 'react-router-dom';\r\n\r\nclass Search extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            firstName: props.firstName,\r\n            lastName: \"\",\r\n            email: \"\",\r\n            active: true,\r\n            numMessages: 0\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n\r\n    window.firebase.firestore().collection(\"users\").where(\"firstName\", \"==\", this.state.firstName)\r\n    .get()\r\n    .then((querySnapshot) => {\r\n        console.log(querySnapshot);\r\n        querySnapshot.forEach((doc) => {\r\n            if(doc.data().firstName){\r\n                var countNum = 0;\r\n                window.firebase.firestore().collection(\"messages\").where(\"user.email\", \"==\", doc.data().email)\r\n                .get()\r\n                .then((querySnapshot) => {\r\n                    querySnapshot.forEach((doc) => {\r\n                        countNum++;\r\n                        console.log(countNum)\r\n                        console.log(doc.id, \" =>>>>>>>>>>>>> \", doc.data());\r\n                        this.setState({\r\n                            numMessages : countNum\r\n                        })\r\n                    });\r\n                })\r\n                .catch(function(error) {\r\n                    console.log(\"Error getting documents: \", error);\r\n                });\r\n                console.log(\"--------> \" + countNum)\r\n                this.setState({\r\n                    firstName: doc.data().firstName,\r\n                    lastName: doc.data().lastName,\r\n                    email: doc.data().email,\r\n                    active: doc.data().active,\r\n                    numMessages: countNum\r\n                });\r\n            }\r\n            console.log(doc.id, \" =>>>>>>>>>>>>> \", doc.data());\r\n        });\r\n    })\r\n    .catch(function(error) {\r\n        console.log(\"Error getting documents: \", error);\r\n    });\r\n    \r\n    }\r\n    \r\n    render(){\r\n\r\n        if(this.state.email){\r\n            return (\r\n                <div className=\"form-login\">\r\n                    <div className=\"container-form\">\r\n                        <h1>Datos de la busqueda</h1>\r\n                            <div className=\"element-form\">\r\n                                <label htmlFor=\"firstName\">Nombres</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    id=\"firstName\"\r\n                                    name=\"firstName\"\r\n                                    value={this.state.firstName}\r\n                                    disabled />\r\n                            </div>\r\n        \r\n                            <div className=\"element-form\">\r\n                                <label htmlFor=\"lastName\">Apellidos</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    id=\"lastName\"\r\n                                    name=\"lastName\"\r\n                                    value={this.state.lastName}\r\n                                    disabled/>\r\n                            </div>\r\n        \r\n                            <div className=\"element-form\">\r\n                                <label htmlFor=\"email\">Email</label>\r\n                                <input\r\n                                    type=\"email\"\r\n                                    id=\"email\"\r\n                                    name=\"email\"\r\n                                    value={this.state.email}\r\n                                    disabled/>\r\n                            </div>\r\n        \r\n                            {this.state.active &&\r\n                                <div className=\"alert alert-success\" role=\"alert\">\r\n                                El usuario esta activo\r\n                              </div>\r\n                            }\r\n                            {!this.state.active &&\r\n                                <div className=\"alert alert-danger\" role=\"alert\">\r\n                                El usuario esta inactivo\r\n                              </div>\r\n                            }\r\n                            \r\n                            <label className=\"element-form\"> Numero de mensajes : { this.state.numMessages }</label>\r\n                    </div>\r\n                </div>\r\n            );\r\n        }else{\r\n            return (\r\n                <div className=\"form-login\">\r\n                    <div className=\"container-form\">\r\n                        <h1>No se encontro ningún usuario con ese nombre</h1>\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n\r\n    }\r\n\r\n    \r\n    \r\n}\r\n\r\nexport default Search ","import React, {useState, useEffect} from 'react'\r\n\r\nconst NewMessage = (props) => {\r\n    \r\n    const [message, saveMessage] = useState({\r\n        id: '',\r\n        title: '',\r\n        description: '',\r\n        date: '',\r\n        user: JSON.parse(sessionStorage.getItem('user')),\r\n        replies : []\r\n        \r\n    })\r\n\r\n    useEffect(() => {\r\n        if(props.message){\r\n            console.log(\"entro\")\r\n            saveMessage({\r\n                id: props.message.id,\r\n                title: props.message.title,\r\n                description: props.message.description,\r\n                date: props.message.date,\r\n                user: JSON.parse(sessionStorage.getItem('user')),\r\n                replies : props.message.replies\r\n            })\r\n        }\r\n    \r\n      }, []);\r\n\r\n    const [error, changeError] = useState({\r\n        error: false,\r\n        message : ''\r\n    })\r\n\r\n    const {id, title, description, date, user, replies} = message;\r\n    \r\n    const onChange = (e) => {\r\n        saveMessage({\r\n            ...message,\r\n            [e.target.name] : e.target.value\r\n        })\r\n\r\n        changeError({\r\n            error: false,\r\n            message: ''\r\n        })\r\n    }\r\n\r\n    const onSubmit = e => {\r\n        e.preventDefault();\r\n        if(title.trim() === '' || description.trim() === '' ){\r\n            \r\n            changeError({\r\n                error: true,\r\n                message: 'No pueden haber campos vacios'\r\n            })\r\n            return;\r\n        }\r\n\r\n        saveMessage({\r\n            ...message,\r\n            date : window.firebase.firestore.Timestamp.fromDate(new Date())\r\n        })\r\n\r\n        if(message.id !== \"\"){\r\n            window.firebase.firestore().collection(\"messages\").doc(message.id).delete()\r\n        }\r\n        \r\n\r\n        window.firebase.firestore().collection(\"messages\").add({\r\n            message\r\n        })\r\n        .then(function(docRef) {\r\n            console.log(\"Document written with ID: \", docRef.id);\r\n            saveMessage({\r\n                ... message,\r\n                id : docRef.id\r\n            })\r\n            const messageFirebase = {\r\n                id: docRef.id,\r\n                title: title,\r\n                description: description,\r\n                date: window.firebase.firestore.Timestamp.fromDate(new Date()),\r\n                user: JSON.parse(sessionStorage.getItem('user')),\r\n                replies : replies\r\n            }\r\n            window.firebase.firestore().collection(\"messages\").doc(docRef.id).set(messageFirebase)\r\n            \r\n            saveMessage({\r\n                id: '',\r\n                title: '',\r\n                description: '',\r\n                date: '',\r\n                user: JSON.parse(sessionStorage.getItem('user')),\r\n                replies : []\r\n            })\r\n        })\r\n        .catch(function(error) {\r\n            console.error(\"Error adding document: \", error);\r\n        });\r\n        alert(\"Publicacion realizada exitosamente\")\r\n    }\r\n\r\n    return (\r\n        <div className=\"form-login\">\r\n            <div className=\"container-new-message\">\r\n                <h1>Nueva Publicacion</h1>\r\n                <form onSubmit={onSubmit}>\r\n\r\n                    <label htmlFor=\"email\">Titulo</label>\r\n                    <div className=\"element-form\">\r\n                        <input\r\n                            type=\"text\"\r\n                            id=\"title\"\r\n                            name=\"title\"\r\n                            value = {title}\r\n                            placeholder=\"Escribe el titulo de la publicacion\"\r\n                            onChange={onChange}/>\r\n                    </div>\r\n\r\n                    <label htmlFor=\"password\">Descripcion</label>\r\n                    <div className=\"element-form\">\r\n                        <textarea className=\"form-control textarea\" \r\n                            id=\"description\" \r\n                            name=\"description\"\r\n                            value={description}\r\n                            placeholder=\"Escribe la descripcion de la publicacion\"\r\n                            onChange={onChange}\r\n                            rows=\"5\"/>\r\n                    </div>\r\n\r\n                    <div className=\"element-form\">\r\n                        <input type=\"submit\" className=\"btn btn-primary btn-block\" value=\"Publicar\"/>\r\n                    </div>\r\n                </form>\r\n                {error.error &&\r\n                            <div className=\"alert alert-danger\" role=\"alert\">{error.message}</div>\r\n                        }\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default NewMessage ","import React, { useState } from \"react\";\r\nimport Forum from \"./Forum\";\r\nimport { Route, Redirect, Link } from \"react-router-dom\";\r\nimport Profile from \"./Profile\";\r\nimport Search from \"./Search\";\r\nimport NewMessage from \"./NewMessage\";\r\n\r\n\r\n\r\nconst Home = () => {\r\n\r\n  const FORUM = 'forum'\r\n  const PROFILE = 'profile'\r\n  const SEARCH = 'search'\r\n  const NEW_MESSAGE = 'newMessage'\r\n  const EDIT_MESSAGE = 'editMessage'\r\n\r\n\r\n  const [page, changePage] = useState({\r\n    actualState: FORUM\r\n  })\r\n\r\n  const [search, stateSearch] = useState({\r\n    inputSearch: ''\r\n  })\r\n\r\n  const [keys, changeKey] = useState({\r\n    keyForum: 0,\r\n    keySearch : 0\r\n  })\r\n\r\n  const onChangeSearch = (e) => {\r\n    stateSearch({\r\n      inputSearch: e.target.value\r\n    })\r\n  }\r\n\r\n  const onSubmitSearch = e => {\r\n    e.preventDefault();\r\n    changePage({\r\n      actualState: SEARCH\r\n    })\r\n    const newKey = keys.keySearch + 1\r\n    changeKey({\r\n      ...keys,\r\n      keySearch : newKey\r\n    })\r\n  }\r\n\r\n  const changeToProfile = () => {\r\n    changePage({\r\n      actualState: PROFILE\r\n    })\r\n  }\r\n\r\n  const changeToForum = () => {\r\n    changePage({\r\n      actualState: FORUM\r\n    })\r\n    const newKey = keys.keyForum + 1\r\n    changeKey({\r\n      ...keys,\r\n      keyForum : newKey\r\n    })\r\n  }\r\n\r\n  const changeToNewMessage = () => {\r\n    changePage({\r\n      actualState: NEW_MESSAGE\r\n    })\r\n  }\r\n\r\n  const editMessageHome = (message) => {\r\n    if(message){\r\n       changePage({\r\n        actualState: EDIT_MESSAGE,\r\n        message : message\r\n       })\r\n    }\r\n  }\r\n\r\n\r\n\r\n  return (\r\n    <Route>\r\n      {\r\n        sessionStorage.getItem('user') ? (\r\n          <div>\r\n            <nav className=\"navbar navbar-expand-lg navbar-dark bg-dark\">\r\n\r\n              <button className=\"btn btn-outline-danger my-2 my-sm-0\" onClick={changeToForum}>Forum</button>\r\n\r\n              <div className=\"collapse navbar-collapse ml-5\" id=\"navbarSupportedContent\">\r\n                <form className=\"form-inline mr-auto\" onSubmit={onSubmitSearch}>\r\n                  <input\r\n                    className=\"form-control mr-sm-2\"\r\n                    type=\"search\"\r\n                    value={search.inputSearch}\r\n                    placeholder=\"Buscar\"\r\n                    aria-label=\"Search\"\r\n                    onChange={onChangeSearch}\r\n                  />\r\n                  <button className=\"btn btn-outline-danger my-2 my-sm-0\" type=\"submit\">\r\n                    Buscar\r\n                </button>\r\n                </form>\r\n\r\n                <button className=\"btn btn-danger my-2 my-sm-0 m-5\" onClick={changeToNewMessage}>Publicar Mensaje</button>\r\n\r\n                <ul className=\"navbar-nav my-2 my-lg-0\">\r\n                  <li>\r\n                    <button className=\"btn btn-outline-danger my-2 my-sm-0\" onClick={changeToProfile}>Ver Perfil</button>\r\n                  </li>\r\n\r\n                  <li>\r\n                    <Link to={'/'} className=\"btn btn-outline-danger my-2 my-sm-0\">Cerrar sesión</Link>\r\n                  </li>\r\n\r\n                </ul>\r\n              </div>\r\n            </nav>\r\n            {(page.actualState === FORUM) ? <Forum key={keys.keyForum} editMessage={editMessageHome} /> :\r\n             (page.actualState === PROFILE) ? <Profile /> :\r\n             (page.actualState === SEARCH) ? <Search firstName={search.inputSearch} key={keys.keySearch}/> :\r\n             (page.actualState === NEW_MESSAGE)  ?  <NewMessage /> : <NewMessage message={page.message}/>\r\n            }\r\n\r\n          </div>\r\n          ) : sessionStorage.getItem('admin') ? (<Redirect to=\"/home-admin\" /> ) : (<Redirect to=\"/\" /> )\r\n\r\n      }\r\n\r\n    </Route>\r\n\r\n  );\r\n}\r\n\r\nexport default Home;\r\n","import React, { useEffect, useRef } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\n\r\nconst modalRoot = document.getElementById(\"modal\");\r\nconst Modal = ({ children }) => {\r\n  const elRef = useRef(null);\r\n  if (!elRef.current) {\r\n    const div = document.createElement(\"div\");\r\n    elRef.current = div;\r\n  }\r\n\r\n  useEffect(() => {\r\n    modalRoot.appendChild(elRef.current);\r\n\r\n    //run this whenever the modalRoot get closed\r\n    return () => modalRoot.removeChild(elRef.current);\r\n  }, []);\r\n\r\n  return createPortal(<div>{children}</div>, elRef.current);\r\n};\r\n\r\nexport default Modal;","import React, {Component} from 'react';\r\nimport User from './User';\r\nimport Modal from \"./Modal\";\r\n\r\nclass UserResults extends Component{\r\n\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n        loading: true,\r\n          users: [],\r\n          showModal: false,\r\n          emailDelete: \"\"\r\n        };\r\n      }\r\n\r\n\r\n\r\n      async updateUsers(){\r\n\r\n        var usersFromFirebase = []\r\n       await window.firebase.firestore().collection(\"users\").get().then(querySnapshot => {\r\n            querySnapshot.forEach(doc => {\r\n\r\n                usersFromFirebase.push(doc.data())\r\n                console.log( doc.data());\r\n            });\r\n\r\n            \r\n        });\r\n        this.setState({\r\n            users: usersFromFirebase,\r\n            loading: false,\r\n            showModal: false\r\n        })\r\n        \r\n        console.log('hizofetch',this.state);\r\n    }\r\n\r\n\r\n    async activationUser(email, value){\r\n\r\n        //console.log('lol', email , value)\r\n        window.firebase.firestore().collection(\"users\").doc(email).update({\"active\" : value});\r\n\r\n\r\n         setTimeout(() => {\r\n             this.updateUsers();\r\n           }, 1000);\r\n\r\n    }\r\n\r\n    \r\n\r\n\r\n    deleteUser(email){\r\n\r\n        \r\n\r\n        window.firebase.firestore().collection(\"messages\").where(\"user.email\", \"==\", email).get()\r\n        .then(function(querySnapshot) {\r\n            querySnapshot.forEach(function(doc) {\r\n                // doc.data() is never undefined for query doc snapshots\r\n                if(doc.exists){\r\n                    alert('posee mensajes asociados, no se puede eliminar');\r\n                }\r\n            });\r\n            alert('Eliminado Exitosamente!');\r\n            window.firebase.firestore().collection('users').doc(email).delete().then(function() {\r\n                //alert('Eliminado Exitosamente!');\r\n            }).catch(function(error) {\r\n                console.error(\"Error removing document: \", error);\r\n            });\r\n            \r\n            \r\n        })\r\n        .catch(function(error) {\r\n            console.log(\"Error getting documents: \", error);\r\n        });\r\n        this.setState({loading:true});\r\n        //importante esperar para que firebase se actualice, esto me tuvo hasta las 3 am\r\n       setTimeout(() => {\r\n            this.updateUsers();\r\n          }, 3000);\r\n\r\n          \r\n        \r\n\r\n    \r\n    }\r\n\r\n\r\n  \r\n\r\n    componentDidMount(){\r\n        //cargar los usuarios\r\n        this.updateUsers();\r\n    }\r\n\r\n    deleteAction(email){\r\n            this.setState({ emailDelete: email, showModal: !this.state.showModal});\r\n    }\r\n\r\n    \r\n\r\n\r\n    render (){\r\n\r\n        if (this.state.loading) {\r\n            return <h1>Loading ...</h1>;\r\n          }\r\n\r\n          \r\n          const { users, showModal, emailDelete } = this.state;\r\n          return (\r\n\r\n            <div >\r\n                {\r\n                    users.length === 0 ?\r\n                    (<h1>No Users found</h1>) : (\r\n                        users.filter((user) => user.email !== JSON.parse(sessionStorage.getItem(\"admin\")).email ).map((user) => (\r\n                            <div key={user.email} className=\"media user m-5\">\r\n                            <img src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7e/Circle-icons-profile.svg/1200px-Circle-icons-profile.svg.png\" className=\"size-image mr-3 p-3\" alt=\"...\" />\r\n                            <div  className=\"w-50\">\r\n                                \r\n                                <h3 className=\"media-heading\">Email: {user.email} <span className={user.active ? \"badge badge-success\" : \"badge badge-danger\"}>{user.active ? \"Activo\" : \"Inactivo\"}</span></h3>\r\n                                <h3 className=\"media-heading\">firstName: {user.firstName}</h3>\r\n                                <h3 className=\"media-heading\">lastName: {user.lastName}</h3>\r\n                                \r\n                            </div>\r\n                        <button className={user.active ? \"btn btn-danger\" : \"btn btn-success\"}  onClick={() => this.activationUser(user.email, !user.active)}>{user.active ? \"Desactivar\" : \"Activar\"}</button>\r\n                          <button className=\"btn btn-dark ml-5\" value={user.email} onClick={e => this.deleteAction(e.target.value)}>Borrar</button>\r\n                          \r\n                         \r\n                          </div>\r\n                        ))\r\n                    )\r\n                }\r\n                 {showModal ? (\r\n            <Modal>\r\n              <div>\r\n                <h1>Desea eliminar a {emailDelete}?</h1>\r\n                <button onClick={() => this.deleteUser(emailDelete)}>Sí</button>\r\n                <button onClick={() => this.deleteAction(\"\")}>\r\n                  No\r\n                </button>\r\n              </div>\r\n            </Modal>\r\n          ) : null}\r\n            </div>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nexport default UserResults;\r\n\r\n\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { Route, Redirect, Link } from \"react-router-dom\";\r\nimport UserResults from './UserResults';\r\nimport Profile from '../forum/Profile';\r\n\r\n\r\nconst HomeAdmin = () => {\r\n\r\n  const HOME_ADMIN = \"HomeAdmin\";\r\n  const USERS = \"Users\";\r\n  const PROFILE =\"Profile\";\r\n  const MESSAGE_1 = \"Welcome!\";\r\n  const MESSAGE_2 = \"Usuarios\";\r\n  const MESSAGE_3 = \"Perfil\";\r\n\r\n\r\n\r\n\r\n\r\n  const [page, changePage] = useState(HOME_ADMIN);\r\n  const [message, setMessage] = useState(MESSAGE_1);\r\n\r\n  // useEffect(() => {\r\n  //   console.log(page);\r\n  // }, [page])\r\n  \r\n  const changeToUsers = () => {\r\n    changePage({\r\n      actualState: USERS\r\n    })\r\n\r\n    setMessage(MESSAGE_2)\r\n    \r\n  }\r\n\r\n  const changeToProfile = () => {\r\n    changePage({\r\n      actualState: PROFILE\r\n    })\r\n\r\n    setMessage(MESSAGE_3)\r\n  }\r\n\r\n  const changeToHome = () => {\r\n    changePage({\r\n      actualState: HOME_ADMIN\r\n    })\r\n    setMessage(MESSAGE_1)\r\n    \r\n  }\r\n\r\n\r\n\r\n\r\n    return (\r\n        <Route>\r\n          {\r\n            sessionStorage.getItem('admin') ? (\r\n              <div>\r\n              \r\n              <nav className=\"navbar navbar-expand-lg navbar-dark bg-dark\">\r\n    \r\n                \r\n    \r\n                <div className=\"collapse navbar-collapse ml-5\" id=\"navbarSupportedContent\">\r\n                <div className=\"navbar-brand mr-auto\" onClick={page === HOME_ADMIN ? null : changeToHome}>\r\n                    Admin Dashboard\r\n                </div>\r\n    \r\n                  \r\n        \r\n                  <ul className=\"navbar-nav my-2 my-lg-0\">\r\n\r\n                    <li>\r\n                        <button className=\"btn btn-outline-danger my-2 my-sm-0\" onClick={page === USERS ? null : changeToUsers}>Usuarios</button>\r\n                    </li>\r\n\r\n                    <li>\r\n                      <button className=\"btn btn-outline-danger my-2 my-sm-0\" onClick={page === PROFILE ? null : changeToProfile}>Ver Perfil</button>\r\n                    </li>\r\n    \r\n                    <li>\r\n                    <Link to= {'/'} className=\"btn btn-outline-danger my-2 my-sm-0\">Cerrar sesión</Link>\r\n                    </li>\r\n    \r\n                  </ul>\r\n                </div>\r\n              </nav>\r\n              \r\n              \r\n\r\n            \r\n            <div className=\"container-form my-auto mx-auto\">\r\n                <h1 className=\"display-4 my-auto mx-auto text-center\">{message}</h1>\r\n                \r\n            </div>\r\n     \r\n            { (page.actualState === PROFILE) ? <Profile/> : \r\n              (page.actualState === USERS) ? <UserResults/> :\r\n              null\r\n            }\r\n    \r\n            </div>\r\n            ) :  sessionStorage.getItem('user') ? (<Redirect to=\"/home\" /> ) : (<Redirect to=\"/\" /> ) \r\n          }\r\n    \r\n        </Route>   \r\n    \r\n      );\r\n}\r\n\r\n\r\nexport default HomeAdmin;","import React from 'react';\r\nimport Login from './components/auth/Login'\r\nimport Register from './components/auth/Register'\r\nimport Home from './components/forum/Home'\r\nimport HomeAdmin from './components/admin/HomeAdmin'\r\n\r\nimport {BrowserRouter as Router, Switch, Route} from 'react-router-dom'\r\n\r\n\r\nfunction App() {\r\n\r\n  \r\n\r\n  return (\r\n    <Router>\r\n      <Switch>\r\n        <Route exact path = \"/\" component={Login}></Route>\r\n        <Route exact path = \"/register\" component={Register}></Route>\r\n        <Route exact path = \"/home\" component={Home}></Route>\r\n        <Route exact path = \"/home-admin\" component={HomeAdmin}></Route>\r\n      </Switch>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}