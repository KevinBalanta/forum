(this.webpackJsonpforum=this.webpackJsonpforum||[]).push([[0],{20:function(e,a,t){"use strict";t.r(a),function(e){var a=t(1),r=t(36);e.exports={hash:function(e){for(var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=a.salt?a.salt:(new Date).getTime(),s=a.rounds?a.rounds:10,n=r(e+t),l=0;l<=s;l++)n=r(n);return"".concat(t,"$").concat(s,"$").concat(n)},compare:function(e,t){try{var r=t.split("$"),s=Object(a.a)(r,2),n=s[0],l=s[1];return t===this.hash(e,{salt:n,rounds:l})}catch(i){throw Error(i.message)}}}}.call(this,t(35)(e))},29:function(e,a,t){e.exports=t(45)},34:function(e,a,t){},45:function(e,a,t){"use strict";t.r(a);var r=t(0),s=t.n(r),n=t(18),l=t.n(n),i=(t(34),t(4)),o=t(3),c=t(1),m=t(7),u=function(e){sessionStorage.removeItem("user"),sessionStorage.removeItem("admin");var a=Object(r.useState)({email:"",password:""}),n=Object(c.a)(a,2),l=n[0],u=n[1],d=Object(r.useState)({error:!1,message:""}),g=Object(c.a)(d,2),f=g[0],p=g[1],b=l.email,v=l.password,h=function(e){u(Object(o.a)({},l,Object(i.a)({},e.target.name,e.target.value))),p({error:!1,message:""})};return s.a.createElement("div",{className:"form-login"},s.a.createElement("div",{className:"container-form"},s.a.createElement("h1",null,"Iniciar Sesi\xf3n"),s.a.createElement("form",{onSubmit:function(a){a.preventDefault(),""!==b.trim()&&""!==v.trim()?window.firebase.firestore().collection("users").doc(l.email).get().then((function(a){if(a.exists){var r=a.data();t(20).compare(l.password,r.password)?r.rol?(sessionStorage.setItem("admin",JSON.stringify(r)),e.history.push("/home-admin")):(sessionStorage.setItem("user",JSON.stringify(r)),e.history.push("/home")):p({error:!0,message:"La contrase\xf1a es incorrecta"})}else window.firebase.firestore().collection("users").doc(l.email).delete(),p({error:!0,message:"El email no se encuentra registrado"})})):p({error:!0,message:"No pueden haber campos vacios"})}},s.a.createElement("div",{className:"element-form"},s.a.createElement("label",{htmlFor:"email"},"Email"),s.a.createElement("input",{type:"email",id:"email",name:"email",value:b,placeholder:"Email",onChange:h})),s.a.createElement("div",{className:"element-form"},s.a.createElement("label",{htmlFor:"password"},"Contrase\xf1a"),s.a.createElement("input",{type:"password",id:"password",name:"password",value:v,placeholder:"Contrase\xf1a",onChange:h})),s.a.createElement("div",{className:"element-form"},s.a.createElement("input",{type:"submit",className:"btn btn-primary btn-block",value:"Iniciar Sesi\xf3n"}))),s.a.createElement(m.b,{to:"/register",className:"link-account"},"Registrarse"),f.error&&s.a.createElement("div",{className:"alert alert-danger",role:"alert"},f.message)))},d=function(e){sessionStorage.removeItem("user");var a=Object(r.useState)({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",active:!0}),n=Object(c.a)(a,2),l=n[0],u=n[1],d=Object(r.useState)({error:!1,message:""}),g=Object(c.a)(d,2),f=g[0],p=g[1],b=l.firstName,v=l.lastName,h=l.email,E=l.password,N=l.confirmPassword,w=l.active,S=function(e){u(Object(o.a)({},l,Object(i.a)({},e.target.name,e.target.value))),p({error:!1,message:""})};return s.a.createElement("div",{className:"form-login"},s.a.createElement("div",{className:"container-form"},s.a.createElement("h1",null,"Registrarse"),s.a.createElement("form",{onSubmit:function(a){if(a.preventDefault(),""!==b.trim()&&""!==v.trim()&&""!==h.trim()&&""!==E.trim()&&""!==N.trim())if(E.length<6)p({error:!0,message:"La contrase\xf1a debe tener al menos 6 caracteres"});else if(E===N){var r=t(20).hash(l.password);u(Object(o.a)({},l,{password:r}));var s={firstName:b,lastName:v,email:h,password:r,active:w};window.firebase.firestore().collection("users").doc(l.email).get().then((function(a){a.exists?(p({error:!0,message:"El email ya se encuentra registrado"}),u(Object(o.a)({},l,{email:"",password:"",confirmPassword:""}))):(window.firebase.firestore().collection("users").doc(s.email).set(s),sessionStorage.setItem("user",JSON.stringify(s)),e.history.push("/home"))}))}else p({error:!0,message:"Las contrase\xf1as no concuerdan"});else p({error:!0,message:"No pueden haber campos vacios"})}},s.a.createElement("div",{className:"element-form"},s.a.createElement("label",{htmlFor:"firstName"},"Nombres"),s.a.createElement("input",{type:"text",id:"firstName",name:"firstName",value:b,placeholder:"Nombres",onChange:S})),s.a.createElement("div",{className:"element-form"},s.a.createElement("label",{htmlFor:"lastName"},"Apellidos"),s.a.createElement("input",{type:"text",id:"lastName",name:"lastName",value:v,placeholder:"Apellidos",onChange:S})),s.a.createElement("div",{className:"element-form"},s.a.createElement("label",{htmlFor:"email"},"Email"),s.a.createElement("input",{type:"email",id:"email",name:"email",value:h,placeholder:"Email",onChange:S})),s.a.createElement("div",{className:"element-form"},s.a.createElement("label",{htmlFor:"password"},"Contrase\xf1a"),s.a.createElement("input",{type:"p\tconst onClickMessage = e => {\r e.preventDefault();\r props.parentCallback(props.message)\r }assword",id:"password",name:"password",value:E,placeholder:"Contrase\xf1a",onChange:S})),s.a.createElement("div",{className:"element-form"},s.a.createElement("label",{htmlFor:"confirmPassword"},"Confirmar Contrase\xf1a"),s.a.createElement("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:N,placeholder:"Reescribe tu contrase\xf1a",onChange:S})),s.a.createElement("div",{className:"element-form"},s.a.createElement("input",{type:"submit",className:"btn btn-primary btn-block",value:"Registrarse"}))),s.a.createElement(m.b,{to:"/",className:"link-account"},"Inicio de sesi\xf3n"),f.error&&s.a.createElement("div",{className:"alert alert-danger",role:"alert"},f.message)))},g=t(11),f=t(12),p=t(15),b=t(13),v=t(14),h=function(e){var a=new Date(1e3*e.message.date.seconds+e.message.date.nanoseconds/1e3),t="".concat(a.getDate(),"-").concat(a.getMonth()+1,"-").concat(a.getFullYear(),"    ").concat(a.getHours(),":").concat(a.getMinutes());console.log(a);var r=function(a){a.preventDefault(),e.parentCallback(e.message)},n=e.message.user.email===JSON.parse(sessionStorage.getItem("user")).email;return s.a.createElement("div",{className:"media message mb-1"},s.a.createElement("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7e/Circle-icons-profile.svg/1200px-Circle-icons-profile.svg.png",className:"size-image mr-3 p-3",alt:"..."}),s.a.createElement("div",{className:"media-body  p-3"},s.a.createElement("a",{className:"mt-0 btn-outline-danger",href:"",onClick:r},s.a.createElement("strong",null,e.message.title)),s.a.createElement("h4",null,e.message.description),n&&s.a.createElement("a",{className:"mt-2 mr-5 pt-1 pb-1 pl-5 pr-5 btn btn-danger",role:"alert",onClick:function(a){a.preventDefault(),e.parentCallbackEdit(e.message)}},"  Editar  "),n&&s.a.createElement("a",{className:"mt-2 pt-1 pb-1 pl-5 pr-5 btn btn-danger",role:"alert",onClick:function(a){a.preventDefault(),e.parentCallbackDelete(e.message),window.firebase.firestore().collection("messages").doc(e.message.id).delete()}},"  Eliminar  ")),s.a.createElement("div",{className:"m-4 center-block"},s.a.createElement("a",{className:"mb-4 align-middle",href:"/",onClick:r}," ",e.message.replies.length," respuestas"),s.a.createElement("h5",null,e.message.user.firstName+" "+e.message.user.lastName," "),s.a.createElement("h5",null,t)))},E=function(e){Object(v.a)(t,e);var a=Object(b.a)(t);function t(e){var r;return Object(g.a)(this,t),(r=a.call(this,e)).getSelectedMessage=function(e){r.setState({message:e,messageError:""})},r.getEditMessage=function(e){r.props.editMessage(e)},r.getDeleteMessage=function(e){r.componentDidMount()},r.onChange=function(e){var a;r.setState(Object(o.a)({},r.state,(a={},Object(i.a)(a,e.target.name,e.target.value),Object(i.a)(a,"errorMessage",""),a)))},r.onSubmit=function(e){if(e.preventDefault(),""!==r.state.comment.trim()){var a=r.state.message,t={id:r.state.message.replies.length,description:r.state.comment,user:JSON.parse(sessionStorage.getItem("user"))};a.replies.push(t),r.setState({message:a,comment:"",errorMessage:""}),console.log(a),window.firebase.firestore().collection("messages").doc(a.id).set(r.state.message)}else r.setState(Object(o.a)({},r.state,{messageError:"No pueden haber campos vacios"}))},r.state={messages:[],comment:""},r.getSelectedMessage=r.getSelectedMessage.bind(Object(p.a)(r)),r.onChange=r.onChange.bind(Object(p.a)(r)),r.onSubmit=r.onSubmit.bind(Object(p.a)(r)),r}return Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this,a=[];window.firebase.firestore().collection("messages").get().then((function(t){t.forEach((function(e){a.push(e.data()),console.log(e.id," => ",e.data())})),e.setState({messages:a})})),console.log(this.state)}},{key:"render",value:function(){var e=this,a=this.state.messages;if(this.state.message){var t=this.state.message,r=(t.id,t.title),n=t.description,l=t.date,i=t.user,o=t.replies,c=new Date(1e3*l.seconds+l.nanoseconds/1e3),m="".concat(c.getDate(),"-").concat(c.getMonth()+1,"-").concat(c.getFullYear(),"    ").concat(c.getHours(),":").concat(c.getMinutes());return s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"media message m-5 "},s.a.createElement("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7e/Circle-icons-profile.svg/1200px-Circle-icons-profile.svg.png",className:"size-image mr-3 p-3",alt:"..."}),s.a.createElement("div",{className:"media-body  p-3"},s.a.createElement("h3",{className:"mt-0"},s.a.createElement("strong",null,r)),s.a.createElement("h4",null,n),o.map((function(e){return s.a.createElement("div",{class:"media message m-5",key:e.id},s.a.createElement("a",{class:"mr-3",href:"#"},s.a.createElement("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7e/Circle-icons-profile.svg/1200px-Circle-icons-profile.svg.png",className:"size-image mr-3 p-3",alt:"..."})),s.a.createElement("div",{class:"media-body pt-4"},s.a.createElement("h5",{class:"mt-0"},e.user.firstName+" "+e.user.lastName),e.description))}))),s.a.createElement("div",{className:"m-4 center-block"},s.a.createElement("h4",{className:"mb-4 align-middle"}," ",o.length," respuestas"),s.a.createElement("h5",null,i.firstName+" "+i.lastName," "),s.a.createElement("h5",null,m))),s.a.createElement("form",{onSubmit:this.onSubmit},s.a.createElement("div",{className:"element-form"},s.a.createElement("textarea",{className:"form-control textarea",id:"comment",name:"comment",value:this.state.comment,placeholder:"Comentarios",onChange:this.onChange,rows:"3"})),s.a.createElement("input",{type:"submit",className:"btn btn-dark btn-block",value:"Comentar"})),this.state.errorMessage&&s.a.createElement("div",{className:"alert alert-danger",role:"alert"},this.state.errorMessage))}return s.a.createElement("div",{className:"container"},s.a.createElement("h1",{className:"m-4 title-forum"},"Publicaciones del Foro"),a.map((function(a){return s.a.createElement(h,{key:a.id,message:a,parentCallback:e.getSelectedMessage,parentCallbackEdit:e.getEditMessage,parentCallbackDelete:e.getDeleteMessage})})))}}]),t}(r.Component),N=t(9),w=function(e){var a=sessionStorage.getItem("user")?JSON.parse(sessionStorage.getItem("user")):JSON.parse(sessionStorage.getItem("admin")),n=Object(r.useState)({firstName:a.firstName,lastName:a.lastName,email:a.email,password:"",active:a.active}),l=Object(c.a)(n,2),m=l[0],u=l[1],d=Object(r.useState)({isDisabled:!0,valueButton:"Editar informacion"}),g=Object(c.a)(d,2),f=g[0],p=g[1],b=Object(r.useState)({error:!1,message:""}),v=Object(c.a)(b,2),h=v[0],E=v[1],N=m.firstName,w=m.lastName,S=m.email,y=m.password,O=(m.active,function(e){u(Object(o.a)({},m,Object(i.a)({},e.target.name,e.target.value))),E({error:!1,message:""})});return s.a.createElement("div",{className:"form-login"},s.a.createElement("div",{className:"container-form"},s.a.createElement("h1",null,"PERFIL"),s.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),f.isDisabled)p({isDisabled:!1,valueButton:"Confirmar cambios"});else{if(""===N.trim()||""===w.trim()||""===S.trim()||""===y.trim())return void E({error:!0,message:"No pueden haber campos vacios"});if(y.length<6)return void E({error:!0,message:"La contrase\xf1a debe tener al menos 6 caracteres"});var a=t(20).hash(m.password),r={firstName:m.firstName,lastName:m.lastName,email:m.email,password:a,active:m.active};console.log(m),window.firebase.firestore().collection("users").doc(r.email).set(r),p({isDisabled:!0,valueButton:"Editar informacion"}),console.log(m)}}},s.a.createElement("div",{className:"element-form"},s.a.createElement("label",{htmlFor:"firstName"},"Nombres"),s.a.createElement("input",{type:"text",id:"firstName",name:"firstName",value:N,placeholder:"Nombres",onChange:O,disabled:f.isDisabled})),s.a.createElement("div",{className:"element-form"},s.a.createElement("label",{htmlFor:"lastName"},"Apellidos"),s.a.createElement("input",{type:"text",id:"lastName",name:"lastName",value:w,placeholder:"Apellidos",onChange:O,disabled:f.isDisabled})),s.a.createElement("div",{className:"element-form"},s.a.createElement("label",{htmlFor:"email"},"Email"),s.a.createElement("input",{type:"email",id:"email",name:"email",value:S,placeholder:"Email",onChange:O,disabled:f.isDisabled})),s.a.createElement("div",{className:"element-form"},s.a.createElement("label",{htmlFor:"password"},"Contrase\xf1a"),s.a.createElement("input",{type:"password",id:"password",name:"password",value:y,placeholder:"Contrase\xf1a",onChange:O,disabled:f.isDisabled})),s.a.createElement("div",{className:"element-form"},s.a.createElement("input",{type:"submit",className:"btn btn-primary btn-block",value:f.valueButton}))),h.error&&s.a.createElement("div",{className:"alert alert-danger",role:"alert"},h.message)))},S=function(e){Object(v.a)(t,e);var a=Object(b.a)(t);function t(e){var r;return Object(g.a)(this,t),(r=a.call(this,e)).state={firstName:e.firstName,lastName:"",email:"",active:!0,numMessages:0},r}return Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this;window.firebase.firestore().collection("users").where("firstName","==",this.state.firstName).get().then((function(a){console.log(a),a.forEach((function(a){if(a.data().firstName){var t=0;window.firebase.firestore().collection("messages").where("user.email","==",a.data().email).get().then((function(a){a.forEach((function(a){t++,console.log(t),console.log(a.id," =>>>>>>>>>>>>> ",a.data()),e.setState({numMessages:t})}))})).catch((function(e){console.log("Error getting documents: ",e)})),console.log("--------\x3e "+t),e.setState({firstName:a.data().firstName,lastName:a.data().lastName,email:a.data().email,active:a.data().active,numMessages:t})}console.log(a.id," =>>>>>>>>>>>>> ",a.data())}))})).catch((function(e){console.log("Error getting documents: ",e)}))}},{key:"render",value:function(){return this.state.email?s.a.createElement("div",{className:"form-login"},s.a.createElement("div",{className:"container-form"},s.a.createElement("h1",null,"Datos de la busqueda"),s.a.createElement("div",{className:"element-form"},s.a.createElement("label",{htmlFor:"firstName"},"Nombres"),s.a.createElement("input",{type:"text",id:"firstName",name:"firstName",value:this.state.firstName,disabled:!0})),s.a.createElement("div",{className:"element-form"},s.a.createElement("label",{htmlFor:"lastName"},"Apellidos"),s.a.createElement("input",{type:"text",id:"lastName",name:"lastName",value:this.state.lastName,disabled:!0})),s.a.createElement("div",{className:"element-form"},s.a.createElement("label",{htmlFor:"email"},"Email"),s.a.createElement("input",{type:"email",id:"email",name:"email",value:this.state.email,disabled:!0})),this.state.active&&s.a.createElement("div",{className:"alert alert-success",role:"alert"},"El usuario esta activo"),!this.state.active&&s.a.createElement("div",{className:"alert alert-danger",role:"alert"},"El usuario esta inactivo"),s.a.createElement("label",{className:"element-form"}," Numero de mensajes : ",this.state.numMessages))):s.a.createElement("div",{className:"form-login"},s.a.createElement("div",{className:"container-form"},s.a.createElement("h1",null,"No se encontro ning\xfan usuario con ese nombre")))}}]),t}(r.Component),y=function(e){var a=Object(r.useState)({id:"",title:"",description:"",date:"",user:JSON.parse(sessionStorage.getItem("user")),replies:[]}),t=Object(c.a)(a,2),n=t[0],l=t[1];Object(r.useEffect)((function(){e.message&&(console.log("entro"),l({id:e.message.id,title:e.message.title,description:e.message.description,date:e.message.date,user:JSON.parse(sessionStorage.getItem("user")),replies:e.message.replies}))}),[]);var m=Object(r.useState)({error:!1,message:""}),u=Object(c.a)(m,2),d=u[0],g=u[1],f=(n.id,n.title),p=n.description,b=(n.date,n.user,n.replies),v=function(e){l(Object(o.a)({},n,Object(i.a)({},e.target.name,e.target.value))),g({error:!1,message:""})};return s.a.createElement("div",{className:"form-login"},s.a.createElement("div",{className:"container-new-message"},s.a.createElement("h1",null,"Nueva Publicacion"),s.a.createElement("form",{onSubmit:function(e){e.preventDefault(),""!==f.trim()&&""!==p.trim()?(l(Object(o.a)({},n,{date:window.firebase.firestore.Timestamp.fromDate(new Date)})),""!==n.id&&window.firebase.firestore().collection("messages").doc(n.id).delete(),window.firebase.firestore().collection("messages").add({message:n}).then((function(e){console.log("Document written with ID: ",e.id),l(Object(o.a)({},n,{id:e.id}));var a={id:e.id,title:f,description:p,date:window.firebase.firestore.Timestamp.fromDate(new Date),user:JSON.parse(sessionStorage.getItem("user")),replies:b};window.firebase.firestore().collection("messages").doc(e.id).set(a),l({id:"",title:"",description:"",date:"",user:JSON.parse(sessionStorage.getItem("user")),replies:[]})})).catch((function(e){console.error("Error adding document: ",e)})),alert("Publicacion realizada exitosamente")):g({error:!0,message:"No pueden haber campos vacios"})}},s.a.createElement("label",{htmlFor:"email"},"Titulo"),s.a.createElement("div",{className:"element-form"},s.a.createElement("input",{type:"text",id:"title",name:"title",value:f,placeholder:"Escribe el titulo de la publicacion",onChange:v})),s.a.createElement("label",{htmlFor:"password"},"Descripcion"),s.a.createElement("div",{className:"element-form"},s.a.createElement("textarea",{className:"form-control textarea",id:"description",name:"description",value:p,placeholder:"Escribe la descripcion de la publicacion",onChange:v,rows:"5"})),s.a.createElement("div",{className:"element-form"},s.a.createElement("input",{type:"submit",className:"btn btn-primary btn-block",value:"Publicar"}))),d.error&&s.a.createElement("div",{className:"alert alert-danger",role:"alert"},d.message)))},O=function(){var e=Object(r.useState)({actualState:"forum"}),a=Object(c.a)(e,2),t=a[0],n=a[1],l=Object(r.useState)({inputSearch:""}),i=Object(c.a)(l,2),u=i[0],d=i[1],g=Object(r.useState)({keyForum:0,keySearch:0}),f=Object(c.a)(g,2),p=f[0],b=f[1];return s.a.createElement(N.b,null,sessionStorage.getItem("user")?s.a.createElement("div",null,s.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark"},s.a.createElement("button",{className:"btn btn-outline-danger my-2 my-sm-0",onClick:function(){n({actualState:"forum"});var e=p.keyForum+1;b(Object(o.a)({},p,{keyForum:e}))}},"Forum"),s.a.createElement("div",{className:"collapse navbar-collapse ml-5",id:"navbarSupportedContent"},s.a.createElement("form",{className:"form-inline mr-auto",onSubmit:function(e){e.preventDefault(),n({actualState:"search"});var a=p.keySearch+1;b(Object(o.a)({},p,{keySearch:a}))}},s.a.createElement("input",{className:"form-control mr-sm-2",type:"search",value:u.inputSearch,placeholder:"Buscar","aria-label":"Search",onChange:function(e){d({inputSearch:e.target.value})}}),s.a.createElement("button",{className:"btn btn-outline-danger my-2 my-sm-0",type:"submit"},"Buscar")),s.a.createElement("button",{className:"btn btn-danger my-2 my-sm-0 m-5",onClick:function(){n({actualState:"newMessage"})}},"Publicar Mensaje"),s.a.createElement("ul",{className:"navbar-nav my-2 my-lg-0"},s.a.createElement("li",null,s.a.createElement("button",{className:"btn btn-outline-danger my-2 my-sm-0",onClick:function(){n({actualState:"profile"})}},"Ver Perfil")),s.a.createElement("li",null,s.a.createElement(m.b,{to:"/",className:"btn btn-outline-danger my-2 my-sm-0"},"Cerrar sesi\xf3n"))))),"forum"===t.actualState?s.a.createElement(E,{key:p.keyForum,editMessage:function(e){e&&n({actualState:"editMessage",message:e})}}):"profile"===t.actualState?s.a.createElement(w,null):"search"===t.actualState?s.a.createElement(S,{firstName:u.inputSearch,key:p.keySearch}):"newMessage"===t.actualState?s.a.createElement(y,null):s.a.createElement(y,{message:t.message})):sessionStorage.getItem("admin")?s.a.createElement(N.a,{to:"/home-admin"}):s.a.createElement(N.a,{to:"/"}))},k=t(17),j=t.n(k),C=t(23);var D=document.getElementById("modal"),M=function(e){var a=e.children,t=Object(r.useRef)(null);if(!t.current){var l=document.createElement("div");t.current=l}return Object(r.useEffect)((function(){return D.appendChild(t.current),function(){return D.removeChild(t.current)}}),[]),Object(n.createPortal)(s.a.createElement("div",null,a),t.current)},x=function(e){Object(v.a)(t,e);var a=Object(b.a)(t);function t(){var e;return Object(g.a)(this,t),(e=a.call(this)).state={loading:!0,users:[],showModal:!1,emailDelete:""},e}return Object(f.a)(t,[{key:"updateUsers",value:function(){var e=Object(C.a)(j.a.mark((function e(){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.next=3,window.firebase.firestore().collection("users").get().then((function(e){e.forEach((function(e){a.push(e.data()),console.log(e.data())}))}));case 3:this.setState({users:a,loading:!1,showModal:!1}),console.log("hizofetch",this.state);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"activationUser",value:function(){var e=Object(C.a)(j.a.mark((function e(a,t){var r=this;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.firebase.firestore().collection("users").doc(a).update({active:t}),setTimeout((function(){r.updateUsers()}),1e3);case 2:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}()},{key:"deleteUser",value:function(e){var a=this;window.firebase.firestore().collection("messages").where("user.email","==",e).get().then((function(a){a.forEach((function(e){e.exists&&alert("posee mensajes asociados, no se puede eliminar")})),alert("Eliminado Exitosamente!"),window.firebase.firestore().collection("users").doc(e).delete().then((function(){})).catch((function(e){console.error("Error removing document: ",e)}))})).catch((function(e){console.log("Error getting documents: ",e)})),this.setState({loading:!0}),setTimeout((function(){a.updateUsers()}),3e3)}},{key:"componentDidMount",value:function(){this.updateUsers()}},{key:"deleteAction",value:function(e){this.setState({emailDelete:e,showModal:!this.state.showModal})}},{key:"render",value:function(){var e=this;if(this.state.loading)return s.a.createElement("h1",null,"Loading ...");var a=this.state,t=a.users,r=a.showModal,n=a.emailDelete;return s.a.createElement("div",null,0===t.length?s.a.createElement("h1",null,"No Users found"):t.filter((function(e){return e.email!==JSON.parse(sessionStorage.getItem("admin")).email})).map((function(a){return s.a.createElement("div",{key:a.email,className:"media user m-5"},s.a.createElement("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7e/Circle-icons-profile.svg/1200px-Circle-icons-profile.svg.png",className:"size-image mr-3 p-3",alt:"..."}),s.a.createElement("div",{className:"w-50"},s.a.createElement("h3",{className:"media-heading"},"Email: ",a.email," ",s.a.createElement("span",{className:a.active?"badge badge-success":"badge badge-danger"},a.active?"Activo":"Inactivo")),s.a.createElement("h3",{className:"media-heading"},"firstName: ",a.firstName),s.a.createElement("h3",{className:"media-heading"},"lastName: ",a.lastName)),s.a.createElement("button",{className:a.active?"btn btn-danger":"btn btn-success",onClick:function(){return e.activationUser(a.email,!a.active)}},a.active?"Desactivar":"Activar"),s.a.createElement("button",{className:"btn btn-dark ml-5",value:a.email,onClick:function(a){return e.deleteAction(a.target.value)}},"Borrar"))})),r?s.a.createElement(M,null,s.a.createElement("div",null,s.a.createElement("h1",null,"Desea eliminar a ",n,"?"),s.a.createElement("button",{onClick:function(){return e.deleteUser(n)}},"S\xed"),s.a.createElement("button",{onClick:function(){return e.deleteAction("")}},"No"))):null)}}]),t}(r.Component),I=function(){var e=Object(r.useState)("HomeAdmin"),a=Object(c.a)(e,2),t=a[0],n=a[1],l=Object(r.useState)("Welcome!"),i=Object(c.a)(l,2),o=i[0],u=i[1];return s.a.createElement(N.b,null,sessionStorage.getItem("admin")?s.a.createElement("div",null,s.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark"},s.a.createElement("div",{className:"collapse navbar-collapse ml-5",id:"navbarSupportedContent"},s.a.createElement("div",{className:"navbar-brand mr-auto",onClick:"HomeAdmin"===t?null:function(){n({actualState:"HomeAdmin"}),u("Welcome!")}},"Admin Dashboard"),s.a.createElement("ul",{className:"navbar-nav my-2 my-lg-0"},s.a.createElement("li",null,s.a.createElement("button",{className:"btn btn-outline-danger my-2 my-sm-0",onClick:"Users"===t?null:function(){n({actualState:"Users"}),u("Usuarios")}},"Usuarios")),s.a.createElement("li",null,s.a.createElement("button",{className:"btn btn-outline-danger my-2 my-sm-0",onClick:"Profile"===t?null:function(){n({actualState:"Profile"}),u("Perfil")}},"Ver Perfil")),s.a.createElement("li",null,s.a.createElement(m.b,{to:"/",className:"btn btn-outline-danger my-2 my-sm-0"},"Cerrar sesi\xf3n"))))),s.a.createElement("div",{className:"container-form my-auto mx-auto"},s.a.createElement("h1",{className:"display-4 my-auto mx-auto text-center"},o)),"Profile"===t.actualState?s.a.createElement(w,null):"Users"===t.actualState?s.a.createElement(x,null):null):sessionStorage.getItem("user")?s.a.createElement(N.a,{to:"/home"}):s.a.createElement(N.a,{to:"/"}))};var F=function(){return s.a.createElement(m.a,null,s.a.createElement(N.d,null,s.a.createElement(N.b,{exact:!0,path:"/",component:u}),s.a.createElement(N.b,{exact:!0,path:"/register",component:d}),s.a.createElement(N.b,{exact:!0,path:"/home",component:O}),s.a.createElement(N.b,{exact:!0,path:"/home-admin",component:I})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(F,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[29,1,2]]]);
//# sourceMappingURL=main.d5812091.chunk.js.map